Installation instructions
=========================

The latest release of PS3 Media Server can be downloaded from:

    http://www.ps3mediaserver.org/

This document describes how to install PS3 Media Server from the source files.
To build PMS from the source some software packages are required:

  - The Java JDK (JRE is not enough)
  - Git
  - Maven
  - External libraries

Read the section with full instructions for a complete explanation of how to
install all required software and how to build PMS for each operating system.


Short instructions
------------------

If all required software packages are installed, the following commands will
download the latest sources and build PMS:

    git clone git://github.com/ps3mediaserver/ps3mediaserver.git
    cd ps3mediaserver
    mvn clean package

The result will be built in the "target" directory:

    (Windows) PMS-setup.exe
    (Linux)   pms-linux-generic-x.xx.x.tar.gz
    (Mac OSX) pms-macosx-x.xx.x.dmg


Full instructions
-----------------

First all required software has to be installed:

 1. Download and install Java JDK (JRE is not enough):

        (Windows) http://www.oracle.com/technetwork/java/javase/downloads/index.html 
                    - Be sure to remember the install location. 
        (Linux)   sudo apt-get install sun-java6-jdk
        (Mac OSX) http://developer.apple.com/technologies/xcode.html


 2. Download and install Git:

        (Windows) http://code.google.com/p/msysgit/downloads/list
                    - For the "Adjusting your PATH environment" section, select
                      "Run Git from the Windows Command Prompt".
                    - For the "Configuring the line ending conversions" section,
                      select "Checkout Windows-style, commit Unix-style line
                      endings".
        (Linux)   sudo apt-get install git-core git-gui git-doc
        (Mac OSX) http://git-scm.com/

 3. Download and extract Maven:

        (Windows) http://maven.apache.org/download.html
                    - Be sure to remember the install location. 
        (Linux)   sudo apt-get install maven3
        (Mac OSX) (nothing to do, automatically installed with XCode in step 1)

    Be sure to remember the extract location.

 4. Set environment variables (create new variables or append the value if the
    variable already exists):

        (Windows)
            Level: System, variable: "JAVA_HOME", value: JDK install location
            Level: User, variable "M2_HOME", value: Maven extract location
            Level: User, variable "M2", value: "%M2_HOME%\bin"
            Level: User, variable "Path", value "%M2%"
        (Linux)   (nothing to do)
        (Mac OSX) (nothing to do)

 5. Download the PMS source code by cloning the GitHub repository:

        git clone git://github.com/ps3mediaserver/ps3mediaserver.git
        cd ps3mediaserver

 6. Resolve and install external libraries needed by the build process:

        mvn com.savage7.maven.plugins:maven-external-dependency-plugin:resolve-external
        mvn com.savage7.maven.plugins:maven-external-dependency-plugin:install-external

At this point all required software packages are present.
PMS is now ready to be built.

 7. Update to the latest source (optional):

        git pull

 8. Compile the latest version of PMS:

        mvn clean package

The resulting binaries will be built in the "target" directory:

    (Windows) PMS-setup.exe
    (Linux)   pms-linux-generic-x.xx.x.tar.gz
    (Mac OSX) pms-macosx-x.xx.x.dmg


Automatic builds
----------------
These last two commands can easily be automated using a script:

(Windows)
    rem build-pms.bat
    start /D ps3mediaserver /wait /b git pull
    start /D ps3mediaserver /wait /b mvn clean package

(Linux)
(Mac OSX)
    #!/bin/sh
    # build-pms.sh
    cd ps3mediaserver
    git pull
    mvn clean package

